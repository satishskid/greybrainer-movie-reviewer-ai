<!DOCTYPE html>
<html>
<head>
    <title>Test Gemini Models</title>
    <style>
        body { font-family: monospace; background: #000; color: #0f0; padding: 20px; }
        input { background: #333; color: #fff; padding: 10px; width: 400px; }
        button { background: #0a0; color: #000; padding: 10px; margin: 10px; }
        .result { margin: 10px 0; padding: 10px; background: #111; border-left: 4px solid #0a0; }
        .error { border-left-color: #a00; }
    </style>
</head>
<body>
    <h1>üîç Gemini Model Tester</h1>
    <input type="password" id="apiKey" placeholder="Enter Gemini API Key" />
    <button onclick="listModels()">List Available Models</button>
    <button onclick="testCommonModels()">Test Common Models</button>
    <div id="output"></div>

    <script>
        async function listModels() {
            const apiKey = document.getElementById('apiKey').value;
            const output = document.getElementById('output');
            
            if (!apiKey) {
                output.innerHTML = '<div class="result error">Please enter API key</div>';
                return;
            }
            
            try {
                output.innerHTML = '<div class="result">üîç Fetching available models...</div>';
                
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`);
                const data = await response.json();
                
                if (response.ok && data.models) {
                    const models = data.models
                        .filter(model => model.supportedGenerationMethods?.includes('generateContent'))
                        .map(model => model.name);
                    
                    output.innerHTML = `
                        <div class="result">
                            <h3>‚úÖ Available Models (${models.length}):</h3>
                            ${models.map(model => `<div>‚Ä¢ ${model}</div>`).join('')}
                        </div>
                    `;
                } else {
                    output.innerHTML = `<div class="result error">‚ùå Error: ${JSON.stringify(data, null, 2)}</div>`;
                }
            } catch (error) {
                output.innerHTML = `<div class="result error">‚ùå Error: ${error.message}</div>`;
            }
        }
        
        async function testCommonModels() {
            const apiKey = document.getElementById('apiKey').value;
            const output = document.getElementById('output');
            
            if (!apiKey) {
                output.innerHTML = '<div class="result error">Please enter API key</div>';
                return;
            }
            
            const modelsToTest = [
                'models/gemini-1.5-flash',
                'models/gemini-1.5-pro', 
                'models/gemini-pro',
                'gemini-1.5-flash',
                'gemini-1.5-pro',
                'gemini-pro'
            ];
            
            output.innerHTML = '<div class="result">üß™ Testing models...</div>';
            
            for (const modelName of modelsToTest) {
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: 'Say "test" and nothing else.'
                                }]
                            }]
                        }) + `?key=${apiKey}`
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        output.innerHTML += `<div class="result">‚úÖ ${modelName}: WORKS!</div>`;
                    } else {
                        const error = await response.text();
                        output.innerHTML += `<div class="result error">‚ùå ${modelName}: ${response.status} - ${error}</div>`;
                    }
                } catch (error) {
                    output.innerHTML += `<div class="result error">‚ùå ${modelName}: ${error.message}</div>`;
                }
                
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
        }
    </script>
</body>
</html>